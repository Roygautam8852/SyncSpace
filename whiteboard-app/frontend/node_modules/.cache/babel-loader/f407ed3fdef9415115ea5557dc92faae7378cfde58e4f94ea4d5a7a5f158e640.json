{"ast":null,"code":"var _jsxFileName = \"D:\\\\CapstoneProject\\\\whiteboard-app\\\\frontend\\\\src\\\\components\\\\Toolbar.js\",\n  _s2 = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { MousePointer2, Hand, Pencil, Highlighter, Eraser, Type, Upload, Square, Circle, Minus, ArrowUpRight, Undo2, Redo2, Trash2, RotateCcw, ChevronRight, Settings, Brush, Sparkles, ArrowLeftRight, Triangle, Database, FileText, MessageSquare, Cloud, Diamond, StickyNote } from 'lucide-react';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Toolbar = ({\n  activeTool,\n  setTool,\n  isHost,\n  onClear,\n  onUndo,\n  onRedo\n}) => {\n  _s2();\n  var _s = $RefreshSig$();\n  const [openFlyout, setOpenFlyout] = useState(null); // 'brush' | 'shape' | 'util'\n  const [flyoutPos, setFlyoutPos] = useState({\n    top: 0\n  });\n  const [tooltip, setTooltip] = useState({\n    text: '',\n    visible: false,\n    top: 0\n  });\n\n  // ─── Tool Definitions ───────────────────────────────────────────────────────\n  const brushVariants = [{\n    id: 'highlighter',\n    icon: Highlighter,\n    label: 'Highlighter'\n  }, {\n    id: 'soft-brush',\n    icon: Brush,\n    label: 'Soft Brush'\n  }, {\n    id: 'marker',\n    icon: Brush,\n    label: 'Marker Brush'\n  }, {\n    id: 'smooth-pencil',\n    icon: Sparkles,\n    label: 'Smooth Stroke'\n  }];\n  const shapes = [{\n    id: 'line',\n    icon: Minus,\n    label: 'Line'\n  }, {\n    id: 'arrow',\n    icon: ArrowUpRight,\n    label: 'Arrow'\n  }, {\n    id: 'double-arrow',\n    icon: ArrowLeftRight,\n    label: 'Double Arrow'\n  }, {\n    id: 'rect',\n    icon: Square,\n    label: 'Rectangle'\n  }, {\n    id: 'rounded-rect',\n    icon: Square,\n    label: 'Rounded Rect'\n  }, {\n    id: 'circle',\n    icon: Circle,\n    label: 'Circle'\n  }, {\n    id: 'ellipse',\n    icon: Circle,\n    label: 'Ellipse'\n  }, {\n    id: 'triangle',\n    icon: Triangle,\n    label: 'Triangle'\n  }, {\n    id: 'diamond',\n    icon: Diamond,\n    label: 'Diamond'\n  }, {\n    id: 'sticky',\n    icon: StickyNote,\n    label: 'Sticky Note'\n  }, {\n    id: 'speech-bubble',\n    icon: MessageSquare,\n    label: 'Speech Bubble'\n  }, {\n    id: 'parallelogram',\n    icon: Square,\n    label: 'Parallelogram'\n  }, {\n    id: 'cylinder',\n    icon: Database,\n    label: 'Cylinder (DB)'\n  }, {\n    id: 'document',\n    icon: FileText,\n    label: 'Document'\n  }, {\n    id: 'cloud',\n    icon: Cloud,\n    label: 'Cloud'\n  }];\n  const shapeIds = shapes.map(s => s.id);\n  const brushIds = brushVariants.map(b => b.id);\n\n  // find active shape/brush for icon display in flyout trigger\n  const activeShape = shapes.find(s => s.id === activeTool);\n  const activeBrush = brushVariants.find(b => b.id === activeTool);\n\n  // ─── Helpers ────────────────────────────────────────────────────────────────\n  const tip = (text, e) => {\n    const r = e.currentTarget.getBoundingClientRect();\n    setTooltip({\n      text,\n      visible: true,\n      top: r.top + r.height / 2 - 12\n    });\n  };\n  const hideTip = () => setTooltip(t => ({\n    ...t,\n    visible: false\n  }));\n  const toggleFlyout = (name, e) => {\n    const r = e.currentTarget.getBoundingClientRect();\n    setFlyoutPos({\n      top: r.top\n    });\n    setOpenFlyout(prev => prev === name ? null : name);\n  };\n  const closeAll = () => setOpenFlyout(null);\n  const selectTool = id => {\n    setTool(id);\n    closeAll();\n  };\n\n  // ─── Sub-components ──────────────────────────────────────────────────────────\n  const ToolBtn = ({\n    id,\n    icon: Icon,\n    label,\n    small = false\n  }) => /*#__PURE__*/_jsxDEV(\"button\", {\n    onClick: () => selectTool(id),\n    onMouseEnter: e => tip(label, e),\n    onMouseLeave: hideTip,\n    className: `tool-button ${activeTool === id ? 'tool-button-active' : ''}`,\n    title: label,\n    children: /*#__PURE__*/_jsxDEV(Icon, {\n      size: small ? 15 : 20,\n      strokeWidth: 2.5\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 9\n  }, this);\n  const Divider = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"w-8 h-px bg-slate-100 my-1\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 27\n  }, this);\n  const FlyoutList = ({\n    items\n  }) => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-col gap-1 w-full px-1\",\n    children: items.map(item => /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => selectTool(item.id),\n      onMouseEnter: e => tip(item.label, e),\n      onMouseLeave: hideTip,\n      className: `tool-button w-full justify-start px-3 gap-3 ${activeTool === item.id ? 'tool-button-active' : ''}`,\n      children: [/*#__PURE__*/_jsxDEV(item.icon, {\n        size: 17,\n        strokeWidth: 2.5\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"text-[11px] font-semibold leading-none\",\n        children: item.label\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 21\n      }, this)]\n    }, item.id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 17\n    }, this))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 81,\n    columnNumber: 9\n  }, this);\n  const FlyoutPanel = ({\n    label,\n    children,\n    maxH = 400\n  }) => {\n    _s();\n    const [panelStyle, setPanelStyle] = useState({\n      top: flyoutPos.top,\n      opacity: 0\n    });\n    const panelRef = React.useRef(null);\n    React.useEffect(() => {\n      if (panelRef.current) {\n        const rect = panelRef.current.getBoundingClientRect();\n        const viewportH = window.innerHeight;\n        let top = flyoutPos.top;\n\n        // Adjust if overflowing bottom\n        if (top + rect.height > viewportH - 20) {\n          top = Math.max(70, viewportH - rect.height - 20);\n        }\n        setPanelStyle({\n          top,\n          opacity: 1\n        });\n      }\n    }, []);\n    return /*#__PURE__*/ReactDOM.createPortal(/*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"fixed inset-0 z-[9998]\",\n        onClick: closeAll\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: panelRef,\n        className: \"category-flyout\",\n        style: {\n          top: `${panelStyle.top}px`,\n          zIndex: 9999,\n          maxHeight: maxH,\n          overflowY: 'auto',\n          opacity: panelStyle.opacity,\n          transition: 'opacity 0.15s ease-out, transform 0.15s ease-out',\n          transform: panelStyle.opacity ? 'translateX(0)' : 'translateX(-5px)'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-[9px] font-bold text-slate-400 uppercase tracking-widest px-2 mb-2 pb-1 border-b border-slate-50 w-full text-center\",\n          children: label\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 21\n        }, this), children]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true), document.body);\n  };\n\n  // ─── Render ──────────────────────────────────────────────────────────────────\n  _s(FlyoutPanel, \"ht8WGv63lqKFcidvywxrhjwuBsc=\");\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-col gap-1 items-center relative h-full pb-2\",\n    children: [tooltip.visible && /*#__PURE__*/ReactDOM.createPortal(/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"wb-tooltip\",\n      style: {\n        top: `${tooltip.top}px`\n      },\n      children: tooltip.text\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 17\n    }, this), document.body), /*#__PURE__*/_jsxDEV(ToolBtn, {\n      id: \"select\",\n      icon: MousePointer2,\n      label: \"Select (V)\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(ToolBtn, {\n      id: \"pan\",\n      icon: Hand,\n      label: \"Pan / Move (H)\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(ToolBtn, {\n      id: \"pencil\",\n      icon: Pencil,\n      label: \"Pencil (P)\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relative\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: e => toggleFlyout('brush', e),\n        onMouseEnter: e => tip('Brushes', e),\n        onMouseLeave: hideTip,\n        className: `tool-button relative ${openFlyout === 'brush' || brushIds.includes(activeTool) ? 'tool-button-active' : ''}`,\n        children: [activeBrush ? /*#__PURE__*/_jsxDEV(activeBrush.icon, {\n          size: 20,\n          strokeWidth: 2.5\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 27\n        }, this) : /*#__PURE__*/_jsxDEV(Brush, {\n          size: 20,\n          strokeWidth: 2.5\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 27\n        }, this), /*#__PURE__*/_jsxDEV(ChevronRight, {\n          size: 10,\n          className: `absolute right-0.5 text-slate-300 transition-transform duration-200 ${openFlyout === 'brush' ? '-rotate-90' : 'rotate-90'}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 17\n      }, this), openFlyout === 'brush' && /*#__PURE__*/_jsxDEV(FlyoutPanel, {\n        label: \"Brush Variants\",\n        children: /*#__PURE__*/_jsxDEV(FlyoutList, {\n          items: brushVariants\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => selectTool('eraser'),\n      onMouseEnter: e => tip('Eraser — deletes full stroke', e),\n      onMouseLeave: hideTip,\n      className: `tool-button ${activeTool === 'eraser' ? 'tool-button-active' : ''}`,\n      children: /*#__PURE__*/_jsxDEV(Eraser, {\n        size: 20,\n        strokeWidth: 2.5\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => selectTool('precision-eraser'),\n      onMouseEnter: e => tip('Precision Eraser — pixel erase', e),\n      onMouseLeave: hideTip,\n      className: `tool-button relative ${activeTool === 'precision-eraser' ? 'tool-button-active' : ''}`,\n      children: [/*#__PURE__*/_jsxDEV(Eraser, {\n        size: 15,\n        strokeWidth: 2.5\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"absolute bottom-1 right-1 w-1.5 h-1.5 rounded-full bg-current\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relative\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: e => toggleFlyout('shape', e),\n        onMouseEnter: e => tip('Shapes & Diagrams', e),\n        onMouseLeave: hideTip,\n        className: `tool-button relative ${openFlyout === 'shape' || shapeIds.includes(activeTool) ? 'tool-button-active' : ''}`,\n        children: [activeShape ? /*#__PURE__*/_jsxDEV(activeShape.icon, {\n          size: 20,\n          strokeWidth: 2.5\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 27\n        }, this) : /*#__PURE__*/_jsxDEV(Square, {\n          size: 20,\n          strokeWidth: 2.5\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 27\n        }, this), /*#__PURE__*/_jsxDEV(ChevronRight, {\n          size: 10,\n          className: `absolute right-0.5 text-slate-300 transition-transform duration-200 ${openFlyout === 'shape' ? '-rotate-90' : 'rotate-90'}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 17\n      }, this), openFlyout === 'shape' && /*#__PURE__*/_jsxDEV(FlyoutPanel, {\n        label: \"Shapes & Diagrams\",\n        maxH: 420,\n        children: /*#__PURE__*/_jsxDEV(FlyoutList, {\n          items: shapes\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(ToolBtn, {\n      id: \"text\",\n      icon: Type,\n      label: \"Text Tool (T) \\u2014 click canvas to type\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(ToolBtn, {\n      id: \"upload\",\n      icon: Upload,\n      label: \"Image Upload \\u2014 click canvas to place\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: onUndo,\n      onMouseEnter: e => tip('Undo (Ctrl+Z)', e),\n      onMouseLeave: hideTip,\n      className: \"tool-button\",\n      children: /*#__PURE__*/_jsxDEV(Undo2, {\n        size: 20,\n        strokeWidth: 2\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: onRedo,\n      onMouseEnter: e => tip('Redo (Ctrl+Y)', e),\n      onMouseLeave: hideTip,\n      className: \"tool-button\",\n      children: /*#__PURE__*/_jsxDEV(Redo2, {\n        size: 20,\n        strokeWidth: 2\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relative\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: e => toggleFlyout('util', e),\n        onMouseEnter: e => tip('Utilities', e),\n        onMouseLeave: hideTip,\n        className: `tool-button relative ${openFlyout === 'util' ? 'tool-button-active' : ''}`,\n        children: [/*#__PURE__*/_jsxDEV(Settings, {\n          size: 20,\n          strokeWidth: 2\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(ChevronRight, {\n          size: 10,\n          className: `absolute right-0.5 text-slate-300 transition-transform duration-200 ${openFlyout === 'util' ? '-rotate-90' : 'rotate-90'}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 17\n      }, this), openFlyout === 'util' && /*#__PURE__*/_jsxDEV(FlyoutPanel, {\n        label: \"Utilities\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col gap-1 w-full px-1\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              window.dispatchEvent(new CustomEvent('wb-reset-view'));\n              closeAll();\n            },\n            onMouseEnter: e => tip('Reset View', e),\n            onMouseLeave: hideTip,\n            className: \"tool-button w-full justify-start px-3 gap-3\",\n            children: [/*#__PURE__*/_jsxDEV(RotateCcw, {\n              size: 17\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 285,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-[11px] font-semibold\",\n              children: \"Reset View\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 286,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 279,\n            columnNumber: 29\n          }, this), isHost && /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              onClear();\n              closeAll();\n            },\n            onMouseEnter: e => tip('Clear Board (Host Only)', e),\n            onMouseLeave: hideTip,\n            className: \"tool-button w-full justify-start px-3 gap-3 !text-red-500 hover:!bg-red-50\",\n            children: [/*#__PURE__*/_jsxDEV(Trash2, {\n              size: 17\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 295,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-[11px] font-semibold\",\n              children: \"Clear Board\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 296,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 289,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 147,\n    columnNumber: 9\n  }, this);\n};\n_s2(Toolbar, \"kKfdDthkAnbCn/iLJdrhmieOkRE=\");\n_c = Toolbar;\nexport default Toolbar;\nvar _c;\n$RefreshReg$(_c, \"Toolbar\");","map":{"version":3,"names":["React","useState","ReactDOM","MousePointer2","Hand","Pencil","Highlighter","Eraser","Type","Upload","Square","Circle","Minus","ArrowUpRight","Undo2","Redo2","Trash2","RotateCcw","ChevronRight","Settings","Brush","Sparkles","ArrowLeftRight","Triangle","Database","FileText","MessageSquare","Cloud","Diamond","StickyNote","jsxDEV","_jsxDEV","Fragment","_Fragment","Toolbar","activeTool","setTool","isHost","onClear","onUndo","onRedo","_s2","_s","$RefreshSig$","openFlyout","setOpenFlyout","flyoutPos","setFlyoutPos","top","tooltip","setTooltip","text","visible","brushVariants","id","icon","label","shapes","shapeIds","map","s","brushIds","b","activeShape","find","activeBrush","tip","e","r","currentTarget","getBoundingClientRect","height","hideTip","t","toggleFlyout","name","prev","closeAll","selectTool","ToolBtn","Icon","small","onClick","onMouseEnter","onMouseLeave","className","title","children","size","strokeWidth","fileName","_jsxFileName","lineNumber","columnNumber","Divider","FlyoutList","items","item","FlyoutPanel","maxH","panelStyle","setPanelStyle","opacity","panelRef","useRef","useEffect","current","rect","viewportH","window","innerHeight","Math","max","createPortal","ref","style","zIndex","maxHeight","overflowY","transition","transform","document","body","includes","dispatchEvent","CustomEvent","_c","$RefreshReg$"],"sources":["D:/CapstoneProject/whiteboard-app/frontend/src/components/Toolbar.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport {\r\n    MousePointer2, Hand, Pencil, Highlighter, Eraser, Type, Upload,\r\n    Square, Circle, Minus, ArrowUpRight, Undo2, Redo2, Trash2,\r\n    RotateCcw, ChevronRight, Settings, Brush, Sparkles,\r\n    ArrowLeftRight, Triangle, Database, FileText, MessageSquare,\r\n    Cloud, Diamond, StickyNote\r\n} from 'lucide-react';\r\n\r\nconst Toolbar = ({ activeTool, setTool, isHost, onClear, onUndo, onRedo }) => {\r\n    const [openFlyout, setOpenFlyout] = useState(null); // 'brush' | 'shape' | 'util'\r\n    const [flyoutPos, setFlyoutPos] = useState({ top: 0 });\r\n    const [tooltip, setTooltip] = useState({ text: '', visible: false, top: 0 });\r\n\r\n    // ─── Tool Definitions ───────────────────────────────────────────────────────\r\n    const brushVariants = [\r\n        { id: 'highlighter', icon: Highlighter, label: 'Highlighter' },\r\n        { id: 'soft-brush', icon: Brush, label: 'Soft Brush' },\r\n        { id: 'marker', icon: Brush, label: 'Marker Brush' },\r\n        { id: 'smooth-pencil', icon: Sparkles, label: 'Smooth Stroke' },\r\n    ];\r\n\r\n    const shapes = [\r\n        { id: 'line', icon: Minus, label: 'Line' },\r\n        { id: 'arrow', icon: ArrowUpRight, label: 'Arrow' },\r\n        { id: 'double-arrow', icon: ArrowLeftRight, label: 'Double Arrow' },\r\n        { id: 'rect', icon: Square, label: 'Rectangle' },\r\n        { id: 'rounded-rect', icon: Square, label: 'Rounded Rect' },\r\n        { id: 'circle', icon: Circle, label: 'Circle' },\r\n        { id: 'ellipse', icon: Circle, label: 'Ellipse' },\r\n        { id: 'triangle', icon: Triangle, label: 'Triangle' },\r\n        { id: 'diamond', icon: Diamond, label: 'Diamond' },\r\n        { id: 'sticky', icon: StickyNote, label: 'Sticky Note' },\r\n        { id: 'speech-bubble', icon: MessageSquare, label: 'Speech Bubble' },\r\n        { id: 'parallelogram', icon: Square, label: 'Parallelogram' },\r\n        { id: 'cylinder', icon: Database, label: 'Cylinder (DB)' },\r\n        { id: 'document', icon: FileText, label: 'Document' },\r\n        { id: 'cloud', icon: Cloud, label: 'Cloud' },\r\n    ];\r\n\r\n    const shapeIds = shapes.map(s => s.id);\r\n    const brushIds = brushVariants.map(b => b.id);\r\n\r\n    // find active shape/brush for icon display in flyout trigger\r\n    const activeShape = shapes.find(s => s.id === activeTool);\r\n    const activeBrush = brushVariants.find(b => b.id === activeTool);\r\n\r\n    // ─── Helpers ────────────────────────────────────────────────────────────────\r\n    const tip = (text, e) => {\r\n        const r = e.currentTarget.getBoundingClientRect();\r\n        setTooltip({ text, visible: true, top: r.top + r.height / 2 - 12 });\r\n    };\r\n    const hideTip = () => setTooltip(t => ({ ...t, visible: false }));\r\n\r\n    const toggleFlyout = (name, e) => {\r\n        const r = e.currentTarget.getBoundingClientRect();\r\n        setFlyoutPos({ top: r.top });\r\n        setOpenFlyout(prev => (prev === name ? null : name));\r\n    };\r\n    const closeAll = () => setOpenFlyout(null);\r\n\r\n    const selectTool = (id) => { setTool(id); closeAll(); };\r\n\r\n    // ─── Sub-components ──────────────────────────────────────────────────────────\r\n    const ToolBtn = ({ id, icon: Icon, label, small = false }) => (\r\n        <button\r\n            onClick={() => selectTool(id)}\r\n            onMouseEnter={(e) => tip(label, e)}\r\n            onMouseLeave={hideTip}\r\n            className={`tool-button ${activeTool === id ? 'tool-button-active' : ''}`}\r\n            title={label}\r\n        >\r\n            <Icon size={small ? 15 : 20} strokeWidth={2.5} />\r\n        </button>\r\n    );\r\n\r\n    const Divider = () => <div className=\"w-8 h-px bg-slate-100 my-1\" />;\r\n\r\n    const FlyoutList = ({ items }) => (\r\n        <div className=\"flex flex-col gap-1 w-full px-1\">\r\n            {items.map(item => (\r\n                <button\r\n                    key={item.id}\r\n                    onClick={() => selectTool(item.id)}\r\n                    onMouseEnter={(e) => tip(item.label, e)}\r\n                    onMouseLeave={hideTip}\r\n                    className={`tool-button w-full justify-start px-3 gap-3 ${activeTool === item.id ? 'tool-button-active' : ''}`}\r\n                >\r\n                    <item.icon size={17} strokeWidth={2.5} />\r\n                    <span className=\"text-[11px] font-semibold leading-none\">{item.label}</span>\r\n                </button>\r\n            ))}\r\n        </div>\r\n    );\r\n\r\n    const FlyoutPanel = ({ label, children, maxH = 400 }) => {\r\n        const [panelStyle, setPanelStyle] = useState({ top: flyoutPos.top, opacity: 0 });\r\n        const panelRef = React.useRef(null);\r\n\r\n        React.useEffect(() => {\r\n            if (panelRef.current) {\r\n                const rect = panelRef.current.getBoundingClientRect();\r\n                const viewportH = window.innerHeight;\r\n                let top = flyoutPos.top;\r\n\r\n                // Adjust if overflowing bottom\r\n                if (top + rect.height > viewportH - 20) {\r\n                    top = Math.max(70, viewportH - rect.height - 20);\r\n                }\r\n\r\n                setPanelStyle({ top, opacity: 1 });\r\n            }\r\n        }, []);\r\n\r\n        return ReactDOM.createPortal(\r\n            <>\r\n                <div\r\n                    className=\"fixed inset-0 z-[9998]\"\r\n                    onClick={closeAll}\r\n                />\r\n                <div\r\n                    ref={panelRef}\r\n                    className=\"category-flyout\"\r\n                    style={{\r\n                        top: `${panelStyle.top}px`,\r\n                        zIndex: 9999,\r\n                        maxHeight: maxH,\r\n                        overflowY: 'auto',\r\n                        opacity: panelStyle.opacity,\r\n                        transition: 'opacity 0.15s ease-out, transform 0.15s ease-out',\r\n                        transform: panelStyle.opacity ? 'translateX(0)' : 'translateX(-5px)'\r\n                    }}\r\n                >\r\n                    <div className=\"text-[9px] font-bold text-slate-400 uppercase tracking-widest px-2 mb-2 pb-1 border-b border-slate-50 w-full text-center\">\r\n                        {label}\r\n                    </div>\r\n                    {children}\r\n                </div>\r\n            </>,\r\n            document.body\r\n        );\r\n    };\r\n\r\n    // ─── Render ──────────────────────────────────────────────────────────────────\r\n    return (\r\n        <div className=\"flex flex-col gap-1 items-center relative h-full pb-2\">\r\n\r\n            {/* Global Tooltip */}\r\n            {tooltip.visible && ReactDOM.createPortal(\r\n                <div className=\"wb-tooltip\" style={{ top: `${tooltip.top}px` }}>{tooltip.text}</div>,\r\n                document.body\r\n            )}\r\n\r\n            {/* ── Selection ── */}\r\n            <ToolBtn id=\"select\" icon={MousePointer2} label=\"Select (V)\" />\r\n            <ToolBtn id=\"pan\" icon={Hand} label=\"Pan / Move (H)\" />\r\n\r\n            <Divider />\r\n\r\n            {/* ── Pencil (direct) ── */}\r\n            <ToolBtn id=\"pencil\" icon={Pencil} label=\"Pencil (P)\" />\r\n\r\n            {/* ── Brush Variants (flyout) ── */}\r\n            <div className=\"relative\">\r\n                <button\r\n                    onClick={(e) => toggleFlyout('brush', e)}\r\n                    onMouseEnter={(e) => tip('Brushes', e)}\r\n                    onMouseLeave={hideTip}\r\n                    className={`tool-button relative ${openFlyout === 'brush' || brushIds.includes(activeTool) ? 'tool-button-active' : ''}`}\r\n                >\r\n                    {activeBrush\r\n                        ? <activeBrush.icon size={20} strokeWidth={2.5} />\r\n                        : <Brush size={20} strokeWidth={2.5} />\r\n                    }\r\n                    <ChevronRight\r\n                        size={10}\r\n                        className={`absolute right-0.5 text-slate-300 transition-transform duration-200 ${openFlyout === 'brush' ? '-rotate-90' : 'rotate-90'}`}\r\n                    />\r\n                </button>\r\n                {openFlyout === 'brush' && (\r\n                    <FlyoutPanel label=\"Brush Variants\">\r\n                        <FlyoutList items={brushVariants} />\r\n                    </FlyoutPanel>\r\n                )}\r\n            </div>\r\n\r\n            {/* ── Erasers ── */}\r\n            <button\r\n                onClick={() => selectTool('eraser')}\r\n                onMouseEnter={(e) => tip('Eraser — deletes full stroke', e)}\r\n                onMouseLeave={hideTip}\r\n                className={`tool-button ${activeTool === 'eraser' ? 'tool-button-active' : ''}`}\r\n            >\r\n                <Eraser size={20} strokeWidth={2.5} />\r\n            </button>\r\n            <button\r\n                onClick={() => selectTool('precision-eraser')}\r\n                onMouseEnter={(e) => tip('Precision Eraser — pixel erase', e)}\r\n                onMouseLeave={hideTip}\r\n                className={`tool-button relative ${activeTool === 'precision-eraser' ? 'tool-button-active' : ''}`}\r\n            >\r\n                <Eraser size={15} strokeWidth={2.5} />\r\n                {/* small dot to distinguish from regular eraser */}\r\n                <span className=\"absolute bottom-1 right-1 w-1.5 h-1.5 rounded-full bg-current\" />\r\n            </button>\r\n\r\n            <Divider />\r\n\r\n            {/* ── Shapes (flyout, shows active shape icon) ── */}\r\n            <div className=\"relative\">\r\n                <button\r\n                    onClick={(e) => toggleFlyout('shape', e)}\r\n                    onMouseEnter={(e) => tip('Shapes & Diagrams', e)}\r\n                    onMouseLeave={hideTip}\r\n                    className={`tool-button relative ${openFlyout === 'shape' || shapeIds.includes(activeTool) ? 'tool-button-active' : ''}`}\r\n                >\r\n                    {activeShape\r\n                        ? <activeShape.icon size={20} strokeWidth={2.5} />\r\n                        : <Square size={20} strokeWidth={2.5} />\r\n                    }\r\n                    <ChevronRight\r\n                        size={10}\r\n                        className={`absolute right-0.5 text-slate-300 transition-transform duration-200 ${openFlyout === 'shape' ? '-rotate-90' : 'rotate-90'}`}\r\n                    />\r\n                </button>\r\n                {openFlyout === 'shape' && (\r\n                    <FlyoutPanel label=\"Shapes & Diagrams\" maxH={420}>\r\n                        <FlyoutList items={shapes} />\r\n                    </FlyoutPanel>\r\n                )}\r\n            </div>\r\n\r\n            <Divider />\r\n\r\n            {/* ── Content Tools (direct) ── */}\r\n            <ToolBtn id=\"text\" icon={Type} label=\"Text Tool (T) — click canvas to type\" />\r\n            <ToolBtn id=\"upload\" icon={Upload} label=\"Image Upload — click canvas to place\" />\r\n\r\n            <Divider />\r\n\r\n            {/* ── History ── */}\r\n            <button\r\n                onClick={onUndo}\r\n                onMouseEnter={(e) => tip('Undo (Ctrl+Z)', e)}\r\n                onMouseLeave={hideTip}\r\n                className=\"tool-button\"\r\n            >\r\n                <Undo2 size={20} strokeWidth={2} />\r\n            </button>\r\n            <button\r\n                onClick={onRedo}\r\n                onMouseEnter={(e) => tip('Redo (Ctrl+Y)', e)}\r\n                onMouseLeave={hideTip}\r\n                className=\"tool-button\"\r\n            >\r\n                <Redo2 size={20} strokeWidth={2} />\r\n            </button>\r\n\r\n            <Divider />\r\n\r\n            {/* ── Utilities (flyout) ── */}\r\n            <div className=\"relative\">\r\n                <button\r\n                    onClick={(e) => toggleFlyout('util', e)}\r\n                    onMouseEnter={(e) => tip('Utilities', e)}\r\n                    onMouseLeave={hideTip}\r\n                    className={`tool-button relative ${openFlyout === 'util' ? 'tool-button-active' : ''}`}\r\n                >\r\n                    <Settings size={20} strokeWidth={2} />\r\n                    <ChevronRight\r\n                        size={10}\r\n                        className={`absolute right-0.5 text-slate-300 transition-transform duration-200 ${openFlyout === 'util' ? '-rotate-90' : 'rotate-90'}`}\r\n                    />\r\n                </button>\r\n                {openFlyout === 'util' && (\r\n                    <FlyoutPanel label=\"Utilities\">\r\n                        <div className=\"flex flex-col gap-1 w-full px-1\">\r\n                            <button\r\n                                onClick={() => { window.dispatchEvent(new CustomEvent('wb-reset-view')); closeAll(); }}\r\n                                onMouseEnter={(e) => tip('Reset View', e)}\r\n                                onMouseLeave={hideTip}\r\n                                className=\"tool-button w-full justify-start px-3 gap-3\"\r\n                            >\r\n                                <RotateCcw size={17} />\r\n                                <span className=\"text-[11px] font-semibold\">Reset View</span>\r\n                            </button>\r\n                            {isHost && (\r\n                                <button\r\n                                    onClick={() => { onClear(); closeAll(); }}\r\n                                    onMouseEnter={(e) => tip('Clear Board (Host Only)', e)}\r\n                                    onMouseLeave={hideTip}\r\n                                    className=\"tool-button w-full justify-start px-3 gap-3 !text-red-500 hover:!bg-red-50\"\r\n                                >\r\n                                    <Trash2 size={17} />\r\n                                    <span className=\"text-[11px] font-semibold\">Clear Board</span>\r\n                                </button>\r\n                            )}\r\n                        </div>\r\n                    </FlyoutPanel>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Toolbar;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AACvC,OAAOC,QAAQ,MAAM,WAAW;AAChC,SACIC,aAAa,EAAEC,IAAI,EAAEC,MAAM,EAAEC,WAAW,EAAEC,MAAM,EAAEC,IAAI,EAAEC,MAAM,EAC9DC,MAAM,EAAEC,MAAM,EAAEC,KAAK,EAAEC,YAAY,EAAEC,KAAK,EAAEC,KAAK,EAAEC,MAAM,EACzDC,SAAS,EAAEC,YAAY,EAAEC,QAAQ,EAAEC,KAAK,EAAEC,QAAQ,EAClDC,cAAc,EAAEC,QAAQ,EAAEC,QAAQ,EAAEC,QAAQ,EAAEC,aAAa,EAC3DC,KAAK,EAAEC,OAAO,EAAEC,UAAU,QACvB,cAAc;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAEtB,MAAMC,OAAO,GAAGA,CAAC;EAAEC,UAAU;EAAEC,OAAO;EAAEC,MAAM;EAAEC,OAAO;EAAEC,MAAM;EAAEC;AAAO,CAAC,KAAK;EAAAC,GAAA;EAAA,IAAAC,EAAA,GAAAC,YAAA;EAC1E,MAAM,CAACC,UAAU,EAAEC,aAAa,CAAC,GAAG5C,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC;EACpD,MAAM,CAAC6C,SAAS,EAAEC,YAAY,CAAC,GAAG9C,QAAQ,CAAC;IAAE+C,GAAG,EAAE;EAAE,CAAC,CAAC;EACtD,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAGjD,QAAQ,CAAC;IAAEkD,IAAI,EAAE,EAAE;IAAEC,OAAO,EAAE,KAAK;IAAEJ,GAAG,EAAE;EAAE,CAAC,CAAC;;EAE5E;EACA,MAAMK,aAAa,GAAG,CAClB;IAAEC,EAAE,EAAE,aAAa;IAAEC,IAAI,EAAEjD,WAAW;IAAEkD,KAAK,EAAE;EAAc,CAAC,EAC9D;IAAEF,EAAE,EAAE,YAAY;IAAEC,IAAI,EAAEnC,KAAK;IAAEoC,KAAK,EAAE;EAAa,CAAC,EACtD;IAAEF,EAAE,EAAE,QAAQ;IAAEC,IAAI,EAAEnC,KAAK;IAAEoC,KAAK,EAAE;EAAe,CAAC,EACpD;IAAEF,EAAE,EAAE,eAAe;IAAEC,IAAI,EAAElC,QAAQ;IAAEmC,KAAK,EAAE;EAAgB,CAAC,CAClE;EAED,MAAMC,MAAM,GAAG,CACX;IAAEH,EAAE,EAAE,MAAM;IAAEC,IAAI,EAAE3C,KAAK;IAAE4C,KAAK,EAAE;EAAO,CAAC,EAC1C;IAAEF,EAAE,EAAE,OAAO;IAAEC,IAAI,EAAE1C,YAAY;IAAE2C,KAAK,EAAE;EAAQ,CAAC,EACnD;IAAEF,EAAE,EAAE,cAAc;IAAEC,IAAI,EAAEjC,cAAc;IAAEkC,KAAK,EAAE;EAAe,CAAC,EACnE;IAAEF,EAAE,EAAE,MAAM;IAAEC,IAAI,EAAE7C,MAAM;IAAE8C,KAAK,EAAE;EAAY,CAAC,EAChD;IAAEF,EAAE,EAAE,cAAc;IAAEC,IAAI,EAAE7C,MAAM;IAAE8C,KAAK,EAAE;EAAe,CAAC,EAC3D;IAAEF,EAAE,EAAE,QAAQ;IAAEC,IAAI,EAAE5C,MAAM;IAAE6C,KAAK,EAAE;EAAS,CAAC,EAC/C;IAAEF,EAAE,EAAE,SAAS;IAAEC,IAAI,EAAE5C,MAAM;IAAE6C,KAAK,EAAE;EAAU,CAAC,EACjD;IAAEF,EAAE,EAAE,UAAU;IAAEC,IAAI,EAAEhC,QAAQ;IAAEiC,KAAK,EAAE;EAAW,CAAC,EACrD;IAAEF,EAAE,EAAE,SAAS;IAAEC,IAAI,EAAE3B,OAAO;IAAE4B,KAAK,EAAE;EAAU,CAAC,EAClD;IAAEF,EAAE,EAAE,QAAQ;IAAEC,IAAI,EAAE1B,UAAU;IAAE2B,KAAK,EAAE;EAAc,CAAC,EACxD;IAAEF,EAAE,EAAE,eAAe;IAAEC,IAAI,EAAE7B,aAAa;IAAE8B,KAAK,EAAE;EAAgB,CAAC,EACpE;IAAEF,EAAE,EAAE,eAAe;IAAEC,IAAI,EAAE7C,MAAM;IAAE8C,KAAK,EAAE;EAAgB,CAAC,EAC7D;IAAEF,EAAE,EAAE,UAAU;IAAEC,IAAI,EAAE/B,QAAQ;IAAEgC,KAAK,EAAE;EAAgB,CAAC,EAC1D;IAAEF,EAAE,EAAE,UAAU;IAAEC,IAAI,EAAE9B,QAAQ;IAAE+B,KAAK,EAAE;EAAW,CAAC,EACrD;IAAEF,EAAE,EAAE,OAAO;IAAEC,IAAI,EAAE5B,KAAK;IAAE6B,KAAK,EAAE;EAAQ,CAAC,CAC/C;EAED,MAAME,QAAQ,GAAGD,MAAM,CAACE,GAAG,CAACC,CAAC,IAAIA,CAAC,CAACN,EAAE,CAAC;EACtC,MAAMO,QAAQ,GAAGR,aAAa,CAACM,GAAG,CAACG,CAAC,IAAIA,CAAC,CAACR,EAAE,CAAC;;EAE7C;EACA,MAAMS,WAAW,GAAGN,MAAM,CAACO,IAAI,CAACJ,CAAC,IAAIA,CAAC,CAACN,EAAE,KAAKnB,UAAU,CAAC;EACzD,MAAM8B,WAAW,GAAGZ,aAAa,CAACW,IAAI,CAACF,CAAC,IAAIA,CAAC,CAACR,EAAE,KAAKnB,UAAU,CAAC;;EAEhE;EACA,MAAM+B,GAAG,GAAGA,CAACf,IAAI,EAAEgB,CAAC,KAAK;IACrB,MAAMC,CAAC,GAAGD,CAAC,CAACE,aAAa,CAACC,qBAAqB,CAAC,CAAC;IACjDpB,UAAU,CAAC;MAAEC,IAAI;MAAEC,OAAO,EAAE,IAAI;MAAEJ,GAAG,EAAEoB,CAAC,CAACpB,GAAG,GAAGoB,CAAC,CAACG,MAAM,GAAG,CAAC,GAAG;IAAG,CAAC,CAAC;EACvE,CAAC;EACD,MAAMC,OAAO,GAAGA,CAAA,KAAMtB,UAAU,CAACuB,CAAC,KAAK;IAAE,GAAGA,CAAC;IAAErB,OAAO,EAAE;EAAM,CAAC,CAAC,CAAC;EAEjE,MAAMsB,YAAY,GAAGA,CAACC,IAAI,EAAER,CAAC,KAAK;IAC9B,MAAMC,CAAC,GAAGD,CAAC,CAACE,aAAa,CAACC,qBAAqB,CAAC,CAAC;IACjDvB,YAAY,CAAC;MAAEC,GAAG,EAAEoB,CAAC,CAACpB;IAAI,CAAC,CAAC;IAC5BH,aAAa,CAAC+B,IAAI,IAAKA,IAAI,KAAKD,IAAI,GAAG,IAAI,GAAGA,IAAK,CAAC;EACxD,CAAC;EACD,MAAME,QAAQ,GAAGA,CAAA,KAAMhC,aAAa,CAAC,IAAI,CAAC;EAE1C,MAAMiC,UAAU,GAAIxB,EAAE,IAAK;IAAElB,OAAO,CAACkB,EAAE,CAAC;IAAEuB,QAAQ,CAAC,CAAC;EAAE,CAAC;;EAEvD;EACA,MAAME,OAAO,GAAGA,CAAC;IAAEzB,EAAE;IAAEC,IAAI,EAAEyB,IAAI;IAAExB,KAAK;IAAEyB,KAAK,GAAG;EAAM,CAAC,kBACrDlD,OAAA;IACImD,OAAO,EAAEA,CAAA,KAAMJ,UAAU,CAACxB,EAAE,CAAE;IAC9B6B,YAAY,EAAGhB,CAAC,IAAKD,GAAG,CAACV,KAAK,EAAEW,CAAC,CAAE;IACnCiB,YAAY,EAAEZ,OAAQ;IACtBa,SAAS,EAAE,eAAelD,UAAU,KAAKmB,EAAE,GAAG,oBAAoB,GAAG,EAAE,EAAG;IAC1EgC,KAAK,EAAE9B,KAAM;IAAA+B,QAAA,eAEbxD,OAAA,CAACiD,IAAI;MAACQ,IAAI,EAAEP,KAAK,GAAG,EAAE,GAAG,EAAG;MAACQ,WAAW,EAAE;IAAI;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAC7C,CACX;EAED,MAAMC,OAAO,GAAGA,CAAA,kBAAM/D,OAAA;IAAKsD,SAAS,EAAC;EAA4B;IAAAK,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAE,CAAC;EAEpE,MAAME,UAAU,GAAGA,CAAC;IAAEC;EAAM,CAAC,kBACzBjE,OAAA;IAAKsD,SAAS,EAAC,iCAAiC;IAAAE,QAAA,EAC3CS,KAAK,CAACrC,GAAG,CAACsC,IAAI,iBACXlE,OAAA;MAEImD,OAAO,EAAEA,CAAA,KAAMJ,UAAU,CAACmB,IAAI,CAAC3C,EAAE,CAAE;MACnC6B,YAAY,EAAGhB,CAAC,IAAKD,GAAG,CAAC+B,IAAI,CAACzC,KAAK,EAAEW,CAAC,CAAE;MACxCiB,YAAY,EAAEZ,OAAQ;MACtBa,SAAS,EAAE,+CAA+ClD,UAAU,KAAK8D,IAAI,CAAC3C,EAAE,GAAG,oBAAoB,GAAG,EAAE,EAAG;MAAAiC,QAAA,gBAE/GxD,OAAA,CAACkE,IAAI,CAAC1C,IAAI;QAACiC,IAAI,EAAE,EAAG;QAACC,WAAW,EAAE;MAAI;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,eACzC9D,OAAA;QAAMsD,SAAS,EAAC,wCAAwC;QAAAE,QAAA,EAAEU,IAAI,CAACzC;MAAK;QAAAkC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO,CAAC;IAAA,GAPvEI,IAAI,CAAC3C,EAAE;MAAAoC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAQR,CACX;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACD,CACR;EAED,MAAMK,WAAW,GAAGA,CAAC;IAAE1C,KAAK;IAAE+B,QAAQ;IAAEY,IAAI,GAAG;EAAI,CAAC,KAAK;IAAAzD,EAAA;IACrD,MAAM,CAAC0D,UAAU,EAAEC,aAAa,CAAC,GAAGpG,QAAQ,CAAC;MAAE+C,GAAG,EAAEF,SAAS,CAACE,GAAG;MAAEsD,OAAO,EAAE;IAAE,CAAC,CAAC;IAChF,MAAMC,QAAQ,GAAGvG,KAAK,CAACwG,MAAM,CAAC,IAAI,CAAC;IAEnCxG,KAAK,CAACyG,SAAS,CAAC,MAAM;MAClB,IAAIF,QAAQ,CAACG,OAAO,EAAE;QAClB,MAAMC,IAAI,GAAGJ,QAAQ,CAACG,OAAO,CAACpC,qBAAqB,CAAC,CAAC;QACrD,MAAMsC,SAAS,GAAGC,MAAM,CAACC,WAAW;QACpC,IAAI9D,GAAG,GAAGF,SAAS,CAACE,GAAG;;QAEvB;QACA,IAAIA,GAAG,GAAG2D,IAAI,CAACpC,MAAM,GAAGqC,SAAS,GAAG,EAAE,EAAE;UACpC5D,GAAG,GAAG+D,IAAI,CAACC,GAAG,CAAC,EAAE,EAAEJ,SAAS,GAAGD,IAAI,CAACpC,MAAM,GAAG,EAAE,CAAC;QACpD;QAEA8B,aAAa,CAAC;UAAErD,GAAG;UAAEsD,OAAO,EAAE;QAAE,CAAC,CAAC;MACtC;IACJ,CAAC,EAAE,EAAE,CAAC;IAEN,oBAAOpG,QAAQ,CAAC+G,YAAY,cACxBlF,OAAA,CAAAE,SAAA;MAAAsD,QAAA,gBACIxD,OAAA;QACIsD,SAAS,EAAC,wBAAwB;QAClCH,OAAO,EAAEL;MAAS;QAAAa,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACrB,CAAC,eACF9D,OAAA;QACImF,GAAG,EAAEX,QAAS;QACdlB,SAAS,EAAC,iBAAiB;QAC3B8B,KAAK,EAAE;UACHnE,GAAG,EAAE,GAAGoD,UAAU,CAACpD,GAAG,IAAI;UAC1BoE,MAAM,EAAE,IAAI;UACZC,SAAS,EAAElB,IAAI;UACfmB,SAAS,EAAE,MAAM;UACjBhB,OAAO,EAAEF,UAAU,CAACE,OAAO;UAC3BiB,UAAU,EAAE,kDAAkD;UAC9DC,SAAS,EAAEpB,UAAU,CAACE,OAAO,GAAG,eAAe,GAAG;QACtD,CAAE;QAAAf,QAAA,gBAEFxD,OAAA;UAAKsD,SAAS,EAAC,0HAA0H;UAAAE,QAAA,EACpI/B;QAAK;UAAAkC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACL,CAAC,EACLN,QAAQ;MAAA;QAAAG,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACR,CAAC;IAAA,eACR,CAAC,EACH4B,QAAQ,CAACC,IACb,CAAC;EACL,CAAC;;EAED;EAAAhF,EAAA,CAhDMwD,WAAW;EAiDjB,oBACInE,OAAA;IAAKsD,SAAS,EAAC,uDAAuD;IAAAE,QAAA,GAGjEtC,OAAO,CAACG,OAAO,iBAAIlD,QAAQ,CAAC+G,YAAY,cACrClF,OAAA;MAAKsD,SAAS,EAAC,YAAY;MAAC8B,KAAK,EAAE;QAAEnE,GAAG,EAAE,GAAGC,OAAO,CAACD,GAAG;MAAK,CAAE;MAAAuC,QAAA,EAAEtC,OAAO,CAACE;IAAI;MAAAuC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAM,CAAC,EACpF4B,QAAQ,CAACC,IACb,CAAC,eAGD3F,OAAA,CAACgD,OAAO;MAACzB,EAAE,EAAC,QAAQ;MAACC,IAAI,EAAEpD,aAAc;MAACqD,KAAK,EAAC;IAAY;MAAAkC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eAC/D9D,OAAA,CAACgD,OAAO;MAACzB,EAAE,EAAC,KAAK;MAACC,IAAI,EAAEnD,IAAK;MAACoD,KAAK,EAAC;IAAgB;MAAAkC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eAEvD9D,OAAA,CAAC+D,OAAO;MAAAJ,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eAGX9D,OAAA,CAACgD,OAAO;MAACzB,EAAE,EAAC,QAAQ;MAACC,IAAI,EAAElD,MAAO;MAACmD,KAAK,EAAC;IAAY;MAAAkC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eAGxD9D,OAAA;MAAKsD,SAAS,EAAC,UAAU;MAAAE,QAAA,gBACrBxD,OAAA;QACImD,OAAO,EAAGf,CAAC,IAAKO,YAAY,CAAC,OAAO,EAAEP,CAAC,CAAE;QACzCgB,YAAY,EAAGhB,CAAC,IAAKD,GAAG,CAAC,SAAS,EAAEC,CAAC,CAAE;QACvCiB,YAAY,EAAEZ,OAAQ;QACtBa,SAAS,EAAE,wBAAwBzC,UAAU,KAAK,OAAO,IAAIiB,QAAQ,CAAC8D,QAAQ,CAACxF,UAAU,CAAC,GAAG,oBAAoB,GAAG,EAAE,EAAG;QAAAoD,QAAA,GAExHtB,WAAW,gBACNlC,OAAA,CAACkC,WAAW,CAACV,IAAI;UAACiC,IAAI,EAAE,EAAG;UAACC,WAAW,EAAE;QAAI;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC,gBAChD9D,OAAA,CAACX,KAAK;UAACoE,IAAI,EAAE,EAAG;UAACC,WAAW,EAAE;QAAI;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC,eAE3C9D,OAAA,CAACb,YAAY;UACTsE,IAAI,EAAE,EAAG;UACTH,SAAS,EAAE,uEAAuEzC,UAAU,KAAK,OAAO,GAAG,YAAY,GAAG,WAAW;QAAG;UAAA8C,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC3I,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACE,CAAC,EACRjD,UAAU,KAAK,OAAO,iBACnBb,OAAA,CAACmE,WAAW;QAAC1C,KAAK,EAAC,gBAAgB;QAAA+B,QAAA,eAC/BxD,OAAA,CAACgE,UAAU;UAACC,KAAK,EAAE3C;QAAc;UAAAqC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC3B,CAChB;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACA,CAAC,eAGN9D,OAAA;MACImD,OAAO,EAAEA,CAAA,KAAMJ,UAAU,CAAC,QAAQ,CAAE;MACpCK,YAAY,EAAGhB,CAAC,IAAKD,GAAG,CAAC,8BAA8B,EAAEC,CAAC,CAAE;MAC5DiB,YAAY,EAAEZ,OAAQ;MACtBa,SAAS,EAAE,eAAelD,UAAU,KAAK,QAAQ,GAAG,oBAAoB,GAAG,EAAE,EAAG;MAAAoD,QAAA,eAEhFxD,OAAA,CAACxB,MAAM;QAACiF,IAAI,EAAE,EAAG;QAACC,WAAW,EAAE;MAAI;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAClC,CAAC,eACT9D,OAAA;MACImD,OAAO,EAAEA,CAAA,KAAMJ,UAAU,CAAC,kBAAkB,CAAE;MAC9CK,YAAY,EAAGhB,CAAC,IAAKD,GAAG,CAAC,gCAAgC,EAAEC,CAAC,CAAE;MAC9DiB,YAAY,EAAEZ,OAAQ;MACtBa,SAAS,EAAE,wBAAwBlD,UAAU,KAAK,kBAAkB,GAAG,oBAAoB,GAAG,EAAE,EAAG;MAAAoD,QAAA,gBAEnGxD,OAAA,CAACxB,MAAM;QAACiF,IAAI,EAAE,EAAG;QAACC,WAAW,EAAE;MAAI;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,eAEtC9D,OAAA;QAAMsD,SAAS,EAAC;MAA+D;QAAAK,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC9E,CAAC,eAET9D,OAAA,CAAC+D,OAAO;MAAAJ,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eAGX9D,OAAA;MAAKsD,SAAS,EAAC,UAAU;MAAAE,QAAA,gBACrBxD,OAAA;QACImD,OAAO,EAAGf,CAAC,IAAKO,YAAY,CAAC,OAAO,EAAEP,CAAC,CAAE;QACzCgB,YAAY,EAAGhB,CAAC,IAAKD,GAAG,CAAC,mBAAmB,EAAEC,CAAC,CAAE;QACjDiB,YAAY,EAAEZ,OAAQ;QACtBa,SAAS,EAAE,wBAAwBzC,UAAU,KAAK,OAAO,IAAIc,QAAQ,CAACiE,QAAQ,CAACxF,UAAU,CAAC,GAAG,oBAAoB,GAAG,EAAE,EAAG;QAAAoD,QAAA,GAExHxB,WAAW,gBACNhC,OAAA,CAACgC,WAAW,CAACR,IAAI;UAACiC,IAAI,EAAE,EAAG;UAACC,WAAW,EAAE;QAAI;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC,gBAChD9D,OAAA,CAACrB,MAAM;UAAC8E,IAAI,EAAE,EAAG;UAACC,WAAW,EAAE;QAAI;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC,eAE5C9D,OAAA,CAACb,YAAY;UACTsE,IAAI,EAAE,EAAG;UACTH,SAAS,EAAE,uEAAuEzC,UAAU,KAAK,OAAO,GAAG,YAAY,GAAG,WAAW;QAAG;UAAA8C,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC3I,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACE,CAAC,EACRjD,UAAU,KAAK,OAAO,iBACnBb,OAAA,CAACmE,WAAW;QAAC1C,KAAK,EAAC,mBAAmB;QAAC2C,IAAI,EAAE,GAAI;QAAAZ,QAAA,eAC7CxD,OAAA,CAACgE,UAAU;UAACC,KAAK,EAAEvC;QAAO;UAAAiC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACpB,CAChB;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACA,CAAC,eAEN9D,OAAA,CAAC+D,OAAO;MAAAJ,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eAGX9D,OAAA,CAACgD,OAAO;MAACzB,EAAE,EAAC,MAAM;MAACC,IAAI,EAAE/C,IAAK;MAACgD,KAAK,EAAC;IAAsC;MAAAkC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eAC9E9D,OAAA,CAACgD,OAAO;MAACzB,EAAE,EAAC,QAAQ;MAACC,IAAI,EAAE9C,MAAO;MAAC+C,KAAK,EAAC;IAAsC;MAAAkC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eAElF9D,OAAA,CAAC+D,OAAO;MAAAJ,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eAGX9D,OAAA;MACImD,OAAO,EAAE3C,MAAO;MAChB4C,YAAY,EAAGhB,CAAC,IAAKD,GAAG,CAAC,eAAe,EAAEC,CAAC,CAAE;MAC7CiB,YAAY,EAAEZ,OAAQ;MACtBa,SAAS,EAAC,aAAa;MAAAE,QAAA,eAEvBxD,OAAA,CAACjB,KAAK;QAAC0E,IAAI,EAAE,EAAG;QAACC,WAAW,EAAE;MAAE;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC/B,CAAC,eACT9D,OAAA;MACImD,OAAO,EAAE1C,MAAO;MAChB2C,YAAY,EAAGhB,CAAC,IAAKD,GAAG,CAAC,eAAe,EAAEC,CAAC,CAAE;MAC7CiB,YAAY,EAAEZ,OAAQ;MACtBa,SAAS,EAAC,aAAa;MAAAE,QAAA,eAEvBxD,OAAA,CAAChB,KAAK;QAACyE,IAAI,EAAE,EAAG;QAACC,WAAW,EAAE;MAAE;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC/B,CAAC,eAET9D,OAAA,CAAC+D,OAAO;MAAAJ,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eAGX9D,OAAA;MAAKsD,SAAS,EAAC,UAAU;MAAAE,QAAA,gBACrBxD,OAAA;QACImD,OAAO,EAAGf,CAAC,IAAKO,YAAY,CAAC,MAAM,EAAEP,CAAC,CAAE;QACxCgB,YAAY,EAAGhB,CAAC,IAAKD,GAAG,CAAC,WAAW,EAAEC,CAAC,CAAE;QACzCiB,YAAY,EAAEZ,OAAQ;QACtBa,SAAS,EAAE,wBAAwBzC,UAAU,KAAK,MAAM,GAAG,oBAAoB,GAAG,EAAE,EAAG;QAAA2C,QAAA,gBAEvFxD,OAAA,CAACZ,QAAQ;UAACqE,IAAI,EAAE,EAAG;UAACC,WAAW,EAAE;QAAE;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC,eACtC9D,OAAA,CAACb,YAAY;UACTsE,IAAI,EAAE,EAAG;UACTH,SAAS,EAAE,uEAAuEzC,UAAU,KAAK,MAAM,GAAG,YAAY,GAAG,WAAW;QAAG;UAAA8C,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC1I,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACE,CAAC,EACRjD,UAAU,KAAK,MAAM,iBAClBb,OAAA,CAACmE,WAAW;QAAC1C,KAAK,EAAC,WAAW;QAAA+B,QAAA,eAC1BxD,OAAA;UAAKsD,SAAS,EAAC,iCAAiC;UAAAE,QAAA,gBAC5CxD,OAAA;YACImD,OAAO,EAAEA,CAAA,KAAM;cAAE2B,MAAM,CAACe,aAAa,CAAC,IAAIC,WAAW,CAAC,eAAe,CAAC,CAAC;cAAEhD,QAAQ,CAAC,CAAC;YAAE,CAAE;YACvFM,YAAY,EAAGhB,CAAC,IAAKD,GAAG,CAAC,YAAY,EAAEC,CAAC,CAAE;YAC1CiB,YAAY,EAAEZ,OAAQ;YACtBa,SAAS,EAAC,6CAA6C;YAAAE,QAAA,gBAEvDxD,OAAA,CAACd,SAAS;cAACuE,IAAI,EAAE;YAAG;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE,CAAC,eACvB9D,OAAA;cAAMsD,SAAS,EAAC,2BAA2B;cAAAE,QAAA,EAAC;YAAU;cAAAG,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACzD,CAAC,EACRxD,MAAM,iBACHN,OAAA;YACImD,OAAO,EAAEA,CAAA,KAAM;cAAE5C,OAAO,CAAC,CAAC;cAAEuC,QAAQ,CAAC,CAAC;YAAE,CAAE;YAC1CM,YAAY,EAAGhB,CAAC,IAAKD,GAAG,CAAC,yBAAyB,EAAEC,CAAC,CAAE;YACvDiB,YAAY,EAAEZ,OAAQ;YACtBa,SAAS,EAAC,4EAA4E;YAAAE,QAAA,gBAEtFxD,OAAA,CAACf,MAAM;cAACwE,IAAI,EAAE;YAAG;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE,CAAC,eACpB9D,OAAA;cAAMsD,SAAS,EAAC,2BAA2B;cAAAE,QAAA,EAAC;YAAW;cAAAG,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC1D,CACX;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACA;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACG,CAChB;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACA,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACL,CAAC;AAEd,CAAC;AAACpD,GAAA,CAtSIP,OAAO;AAAA4F,EAAA,GAAP5F,OAAO;AAwSb,eAAeA,OAAO;AAAC,IAAA4F,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}